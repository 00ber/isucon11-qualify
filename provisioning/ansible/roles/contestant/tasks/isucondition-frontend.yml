---
- name: "roles/contestant/tasks/isucondition-frontend: Install frontend packages"
  become_user: isucon
  args:
    chdir: /home/isucon/webapp/frontend
  environment:
    PATH: "/home/isucon/local/node/bin:{{ ansible_env.PATH }}"
  command: npm ci

- name: "roles/contestant/tasks/isucondition-frontend: Build frontend application"
  become_user: isucon
  args:
    chdir: /home/isucon/webapp/frontend
  environment:
    PATH: "/home/isucon/local/node/bin:{{ ansible_env.PATH }}"
  command: npm run build

- name: "roles/contestant/tasks/isucondition-frontend: Remove frontend source code"
  become_user: root
  file:
    path: /home/isucon/webapp/frontend
    state: absent

